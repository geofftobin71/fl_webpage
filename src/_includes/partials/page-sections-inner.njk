{% if section.template == "divider-section" %}
  <hr>
{% endif %}

{% if section.template == "text-section" %}
  <section class="text-section{{ ' bg-' + section.background.color | lower if (section.background.color) and (section.background.color != 'Transparent') }}"{{ ' style="margin:var(--section-padding) 0"' | safe if section.background.image }}>
    {% ifAsync section.background.image %}
      {% include "partials/section-background.njk" %}
    {% endif %}
    <article class="wrapper text-wrapper text-{{ section.align or 'left' }}{{ ' text-shadow' if section.background.image }}{{ ' bigfonts font-secondary' if section.bigfonts }}">
      {% markdown section.text %}
      {% if section.button.text %}
        <div class="text-center font-size-0"><a class="button" role="button" href="{{ section.button.link }}"{{ ' target="_blank" rel="noopener"' | safe if section.button.new_page }}>{{ section.button.text }}</a></div>
      {% endif %}
    </article>
  </section>
{% endif %}

{% if section.template == "image-section" %}
  <section class="image-section">
    <div class="wrapper{{ ' text-wrapper' if section.width == 'Paragraph' }}{{ ' page-wrapper' if section.width == 'Extra Wide' }}{{ ' no-wrapper' if section.width == 'Full' }}">
        {% set image_id = section.image | stripVersion %}
        {% set image_info = image_id | imgInfo %}
        {% set lqip_path = site.cloudinary_url + "/c_limit,w_32,h_32,q_auto,f_jpg,e_blur:100/" + image_id %}
        {% set lqip_data = lqip_path | imgLqip %}
        {% set transforms = "c_fill,ar_1,q_auto,f_auto,g_auto/" %}
        {% set src = site.cloudinary_url + "/w_900," + transforms + image_id %}
      <figure class="canvas aspect aspect1x1 round shadow" style="background-image:url({{ lqip_data }})">
        <noscript><img src="{{ src }}" alt="{{ image_info.context.alt or site.alt }}" style="background-image:url({{ lqip_data }})" loading="lazy" decoding="async" /></noscript>
        <div><img data-srcset="
        {%- for size in image_sizes -%}
        {{ site.cloudinary_url }}/w_{{ size }},{{ transforms }}{{ image_id }} {{ size }}w{{ ',' if not loop.last }}
        {%- endfor -%}
        {%- set sizes = '100vw' -%}
        {%- if section.width == 'Full' -%}
          {%- if two_columns -%}
            {%- set sizes = '(min-width: 1500px) and (orientation: landscape) 750px, (min-width: 950px) and (orientation: landscape) 50vw, 100vw' -%}
          {%- else -%}
            {%- set sizes = '100vw' -%}
          {%- endif -%}
        {%- elif section.width == 'Extra Wide' -%}
          {%- if two_columns -%}
            {%- set sizes = '(min-width: 1500px) and (orientation: landscape) 750px, (min-width: 950px) and (orientation: landscape) 50vw, (min-width: 1500px) 1500px, 100vw' -%}
          {%- else -%}
            {%- set sizes = '(min-width: 1500px) 1500px, 100vw' -%}
          {%- endif -%}
        {%- elif section.width == 'Paragraph' -%}
          {%- if two_columns -%}
            {%- set sizes = '(min-width: 1500px) and (orientation: landscape) 750px, (min-width: 950px) and (orientation: landscape) 50vw, (min-width: 900px) 900px, 100vw' -%}
          {%- else -%}
            {%- set sizes = '(min-width: 900px) 900px, 100vw' -%}
          {%- endif -%}
        {%- else -%}
          {%- if two_columns -%}
            {%- set sizes = '(min-width: 1500px) and (orientation: landscape) 750px, (min-width: 950px) and (orientation: landscape) 50vw, (min-width: 1200px) 1200px, 100vw' -%}
          {%- else -%}
            {%- set sizes = '(min-width: 1200px) 1200px, 100vw' -%}
          {%- endif -%}
        {%- endif -%}
        " sizes="{{ sizes }}" data-src="{{ src }}" src="{{ site.transgif }}" alt="{{ image_info.context.alt or site.alt }}" style="background-image:url({{ lqip_data }})" loading="lazy" decoding="async" /></div>
      </figure>
    </div>
  </section>
{% endif %}

{% if section.template == "contact-form-section" %}
  {% include "partials/contact-form-section.njk" %}
{% endif %}

{% if section.template == "google-maps-section" %}
  <section class="google-maps-section">
    <div class="wrapper">
      <div class="canvas aspect aspect1x1 round shadow">
        {% if env.NODE_ENV == 'deploy' %}
          <iframe class="width100 height100 req-js" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?q=place_id:{{ env.GOOGLE_PLACE_ID }}&key={{ env.GOOGLE_MAPS_KEY }}&zoom=17" allowfullscreen></iframe>
        {% endif %}
        {{ '<noscript>' | safe if env.NODE_ENV == 'deploy' }}
          <a target="_blank" rel="noopener" title="Open in Google Maps" aria-label="Open in Google Maps" href="{{ site.google_maps }}"><img src="{{ '/images/floriade-map.jpg' | url }}" width="1024" height="1024" alt="Map of the location of Floriade at {{ site.address }}, {{ site.address_locality }}, {{ site.address_region }}"></a>
          {{ '</noscript>' | safe if env.NODE_ENV == 'deploy' }}
      </div>
      <noscript><p class="text-center font-size--1">Click to open in Google Maps</p></noscript>
    </div>
  </section>
{% endif %}

{% if section.template == "contact-details-section" %}
  <section class="contact-details-section">
    <div class="vertical center flow">
      <h2 class="heading text-center">Contact Us</h2>
      <a href="{{ site.google_maps }}" title="Open in Google Maps" aria-label="Open in Google Maps" target="_blank" rel="noopener">
        <p>{{ site.address }}<br>{{ site.address_locality }}, {{ site.address_region }}, {{ site.address_postcode }}<br>New Zealand</p>
      </a>
      <p><a href="{{ site.mailto_obf | safe }}?subject=Flowers Enquiry" title="Send us a message" aria-label="Send us a message">{{ site.email_obf | safe }}</a></p>
      <p><a href="tel:{{ site.phone_intl }}" title="Call now" aria-label="Call now">{{ site.phone }}</a></p>
      <h3 class="heading text-center">Follow Us</h3>
      <div class="horizontal space-between color-light" style="width:200px;height:2rem">
        <a href="{{ site.facebook }}" target="_blank" rel="noopener" style="width:16px" title="Follow us on Facebook" aria-label="Follow us on Facebook"> {{ '/src/svg/facebook-f.svg' | svgContents | safe }}</a>
        <a href="{{ site.instagram }}" target="_blank" rel="noopener" style="width:24px" title="Follow us on Instagram" aria-label="Follow us on Instagram"> {{ '/src/svg/instagram.svg' | svgContents | safe }}</a>
        <a href="{{ site.pinterest }}" target="_blank" rel="noopener" style="width:24px" title="Pin us on Pinterest" aria-label="Pin us on Pinterest"> {{ '/src/svg/pinterest.svg' | svgContents | safe }}</a>
        <a href="{{ site.google_page }}" target="_blank" rel="noopener" style="width:24px" title="Find us on Google" aria-label="Find us on Google"> {{ '/src/svg/google.svg' | svgContents | safe }}</a>
      </div>
    </div>
  </section>
{% endif %}

{% if section.template == "shop-hours-section" %}
  <section class="shop-hours-section">
    <div class="vertical flow center">
      <h2 class="heading text-center">Shop Hours</h2>
      {% include "partials/shop-hours.njk" %}
    </div>
  </section>
{% endif %}
