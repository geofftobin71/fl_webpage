{% extends "layouts/base.njk" %}

{% block head %}
{{ super() }}
  {% set jsonld %}
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{{ title | safe }}",
    "description": "{{ description | safe }}",
    {% set image_id = (header_image | stripVersion) or (site.header_image | stripVersion) %}
    "image": [
      "{{ site.cloudinary_url }}/w_1440,ar_1,c_fill,f_jpg,q_auto,g_auto:subject/{{ image_id }}",
      "{{ site.cloudinary_url }}/w_1440,ar_4:3,c_fill,f_jpg,q_auto,g_auto:subject/{{ image_id }}",
      "{{ site.cloudinary_url }}/w_1440,ar_16:9,c_fill,f_jpg,q_auto,g_auto:subject/{{ image_id }}"
    ],
    "author": {
      "@type": "Person",
      "name": "{{ (author | safe) or 'Annwyn Tobin' }}"
    },  
    "publisher": {
      "@type": "Organization",
      "name": "Floriade",
      "logo": {
        "@type": "ImageObject",
        "url": "https://floriade.co.nz/images/floriade-word-60.png"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ site.url }}{{ page.url }}"
    },
    "datePublished": "{{ page.date | htmlDateString }}",
    "dateModified": "{{ page.date | htmlDateString }}"
  }
  {% endset %}

  <script type="application/ld+json">
    {{ jsonld | jsonmin | safe }}
  </script>

<style>.page-links{padding:1em 0;display:grid;grid-gap:3em;grid-template-columns:1fr 1fr;}.page-links a{display:flex;align-items:center;}.page-links .prev{width:var(--step-0);margin-right:0.5em;flex-shrink:0;}.page-links .next{width:var(--step-0);margin-left:0.5em;flex-shrink:0;}</style>
{% endblock %}

{% block content %}
  {% include "partials/header.njk" %}
  <main>
  <section>
    <div class="wrapper text-wrapper">
      <article>
        {{ super() }}
      </article>
    </div>
  </section>
  <hr>
  <div class="wrapper page-wrapper">
    <nav class="page-links font-secondary">
      {% if prevPost.url %}
        <a href="{{ prevPost.url }}" title="Prev">
          <span class="prev">{{ '/src/svg/chevron-left.svg' | svgContents | safe }}</span>
          <p class="text-lowercase">{{ prevPost.data.title }}</p>
        </a>
      {% else %}
        <p>&nbsp;</p>
      {% endif %}
      {% if nextPost.url %}
        <a href="{{ nextPost.url }}" title="Next">
          <p class="text-right text-lowercase">{{ nextPost.data.title }}</p>
          <span class="next">{{ '/src/svg/chevron-right.svg' | svgContents | safe }}</span>
        </a>
      {% else %}
        <p>&nbsp;</p>
      {% endif %}
    </nav>
  </div>
  </main>
  {% include "partials/footer.njk" %}
{% endblock %}
